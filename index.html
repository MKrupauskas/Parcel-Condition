<html>
<head>
  <meta charset="UTF-8">
  <link href="https://fonts.googleapis.com/css?family=Overpass" rel="stylesheet">
  <script language="javascript" type="text/javascript" src="libraries/p5.js"></script>
  <!-- uncomment lines below to include extra p5 libraries -->
  <!--<script language="javascript" src="libraries/p5.dom.js"></script>-->
  <!--<script language="javascript" src="libraries/p5.sound.js"></script>-->
  <script language="javascript" type="text/javascript" src="sketch.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

  <!-- this line removes any default padding and style. you might only need one of these values set. -->
  <style>

  html, body {
        margin: 0;
        padding: 0;
        background-color: #ed7044;
  }

  h1, h3, h2 {
    font-family: 'Overpass', sans-serif;
    padding-left: 0.2em;
    padding-top: 0.2em;
    color: #fff;
  }
  a[href^="http://maps.google.com/maps"]{display:none !important}
  a[href^="https://maps.google.com/maps"]{display:none !important}

  .gmnoprint a, .gmnoprint span, .gm-style-cc {
    display:none;
  }
  .gmnoprint div {
    background:none !important;
  }
  </style>
</head>
<body>
  <div style="width:100%;height:50px;background:	#FB926D;">
  <h1>Your Package // Location</h1>
</div>
<div id="googleMap" style="width:100%;height:400px;"></div>
<div id="condition" style="width:100%;height:50px;background:	#FB926D;">
  <h1>Your Package // Condition</h1>
</div>
<div id="canvasDiv" style="width:100%;height:400px;">
   <canvas id="canvas" style="width:100%;height:400px;"></canvas>
</div>
<h3 style="text-align: center;position: relative; top: 55px;">Telia IoT hackathon 2017</h3>

  <script>
  var root = 'data.json'; // https://Parcel%20Condition:iot101@www.emcom.eu/api/v1/device/3975/
  let data;

  $.ajax({
    url: root,
    method: 'GET'
  }).then(function(dt) {
    data = dt;
  });

  let mapProp;
  let map;
  let marker;
  let coordLat = 54.6979;
  let coordLng = 25.3118;


  function myMap() {
  mapProp= {
      center:new google.maps.LatLng(coordLat, coordLng),
      zoom:17,
      panControl: false,
      zoomControl: false,
      mapTypeControl: false,
      scaleControl: false,
      streetViewControl: false,
      overviewMapControl: false,
      rotateControl: false,
      styles: [{"featureType":"administrative","elementType":"all","stylers":[{"saturation":"-100"}]},{"featureType":"administrative.province","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"landscape","elementType":"all","stylers":[{"saturation":-100},{"lightness":65},{"visibility":"on"}]},{"featureType":"poi","elementType":"all","stylers":[{"saturation":-100},{"lightness":"50"},{"visibility":"simplified"}]},{"featureType":"road","elementType":"all","stylers":[{"saturation":"-100"}]},{"featureType":"road.highway","elementType":"all","stylers":[{"visibility":"simplified"}]},{"featureType":"road.arterial","elementType":"all","stylers":[{"lightness":"30"}]},{"featureType":"road.local","elementType":"all","stylers":[{"lightness":"40"}]},{"featureType":"transit","elementType":"all","stylers":[{"saturation":-100},{"visibility":"simplified"}]},{"featureType":"water","elementType":"geometry","stylers":[{"hue":"#ffff00"},{"lightness":-25},{"saturation":-97}]},{"featureType":"water","elementType":"labels","stylers":[{"lightness":-25},{"saturation":-50}]}]
  };
  map=new google.maps.Map(document.getElementById("googleMap"),mapProp);
  marker = new google.maps.Marker({position: mapProp.center, icon: "test.png"});

  marker.setMap(map);

  }
  setInterval(tick, 10000); // 30000


  function tick () {
    coordLat = data.live["2"];
    coordLng = data.live["3"];
    var latlng = new google.maps.LatLng(coordLat, coordLng);
    marker.setPosition(latlng);
  }
  </script>

  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDJ5-FyeW41v4dRWq9AJP-lkQCYrIbGIkY&callback=myMap"></script>


</body>
</html>
