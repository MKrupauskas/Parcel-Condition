<html>
<head>
  <meta charset="UTF-8">
  <link href="https://fonts.googleapis.com/css?family=Overpass" rel="stylesheet">
  <script language="javascript" type="text/javascript" src="libraries/p5.js"></script>
  <!-- uncomment lines below to include extra p5 libraries -->
  <script language="javascript" src="libraries/p5.dom.js"></script>
  <!--<script language="javascript" src="libraries/p5.sound.js"></script>-->
  <script language="javascript" type="text/javascript" src="sketch.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

  <!-- this line removes any default padding and style. you might only need one of these values set. -->
  <style>

  html, body {
        margin: 0;
        padding: 0;
        background-color: #ed7044;
/*        overflow-x: hidden;*/
  }

  h1, h3, h2, a {
    font-family: 'Overpass', sans-serif;
    padding-left: 0.2em;
    padding-top: 0.2em;
    color: #fff;

  }
  a[href^="http://maps.google.com/maps"]{display:none !important}
  a[href^="https://maps.google.com/maps"]{display:none !important}

  .gmnoprint a, .gmnoprint span, .gm-style-cc {
    display:none;
  }
  .gmnoprint div {
    background:none !important;
  }
  </style>
</head>
<body>
  <div style="width:100%;height:8%;background:	#FB926D;">
  <h1><a href="SecondInterfaceVersion\second.html">Your Package</a></h1>
</div><!--
--><div id="googleMap" style="width:100%;height:45%;"></div><!--
<div id="condition" style="width:100%;height:8%;background:	#FB926D;">
  <h1>Your Package // Condition</h1>
</div>
--><div id="canvasDiv" style="width:100%;height:45%;">
   <!--<canvas id="canvas" style="width:100%;height:400px;"></canvas>-->
</div><!--
<h3 style="text-align: center;position: relative; top: 4%;">Telia IoT hackathon 2017</h3>-->

  <script>

	var dt;
	$.ajax({
		url: 'data.json',
		async: false,
		success: function (csvd) {
			dt = csvd;
		},
		dataType: "json",
		complete: function () {
			// call a function on complete
		}
	});

  let mapProp;
  let map;
  let marker;
  let coordLat = dt.live["2"];
      let coordLng = dt.live["3"];


  function myMap() {
  mapProp= {
      center:new google.maps.LatLng(coordLat, coordLng),
      zoom:16,
      panControl: false,
      zoomControl: false,
      mapTypeControl: false,
      scaleControl: false,
      streetViewControl: false,
      overviewMapControl: false,
      rotateControl: false,
      styles: [{"featureType":"all","elementType":"all","stylers":[{"hue":"#008eff"}]},{"featureType":"poi","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"road","elementType":"all","stylers":[{"saturation":"0"},{"lightness":"0"}]},{"featureType":"transit","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"water","elementType":"all","stylers":[{"visibility":"simplified"},{"saturation":"-60"},{"lightness":"-20"}]}]
  };
  map=new google.maps.Map(document.getElementById("googleMap"),mapProp);
  marker = new google.maps.Marker({position: mapProp.center, icon: "test.png"});

  marker.setMap(map);

  }
  setInterval(tick, 10000); // 30000


  function tick () {
	var map;
		var dt;
		$.ajax({
			url: 'data.json',
			async: false,
			success: function (csvd) {
				dt = csvd;
			},
			dataType: "json",
			complete: function () {
				// call a function on complete
			}
		});
    coordLat = dt.live["2"];
    coordLng = dt.live["3"];
    var latlng = new google.maps.LatLng(coordLat, coordLng);
    marker.setPosition(latlng);
  }
  </script>

  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDJ5-FyeW41v4dRWq9AJP-lkQCYrIbGIkY&callback=myMap"></script>


</body>
</html>
